<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ale & Nao â€” Kintsugi del CorazÃ³n</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&family=Cinzel:wght@400;600&family=Dancing+Script:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #D4A843;
    --gold-light: #F5D080;
    --gold-glow: #FFE484;
    --gold-deep: #9A6E1A;
    --lila: #C8A8E9;
    --lila-soft: #EDE0F8;
    --lila-deep: #8B5CC8;
    --bg: #0D0A0F;
    --text: #F0E6F8;
    --text-muted: #8A7A95;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Cormorant Garamond', serif;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      radial-gradient(ellipse at 25% 20%, rgba(200,168,233,0.07) 0%, transparent 55%),
      radial-gradient(ellipse at 75% 75%, rgba(212,168,67,0.06) 0%, transparent 55%);
    pointer-events: none;
    z-index: 0;
  }

  #app {
    position: relative;
    z-index: 1;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
  }

  /* â”€â”€ SCREENS â”€â”€ */
  .screen { display: none !important; width: 100%; max-width: 980px; }
  .screen.active { display: flex !important; flex-direction: column; align-items: center; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â• INTRO â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #intro {
    text-align: center;
    max-width: 620px;
    animation: fadeUp 1.5s ease forwards;
  }

  .eyebrow {
    font-family: 'Cinzel', serif;
    font-size: 0.68rem;
    letter-spacing: 0.45em;
    color: var(--lila);
    text-transform: uppercase;
    margin-bottom: 30px;
    opacity: 0.75;
  }

  .intro-title {
    font-size: clamp(2.8rem, 7vw, 5.2rem);
    font-weight: 300;
    line-height: 1.05;
    margin-bottom: 14px;
  }

  .intro-title em {
    font-style: italic;
    background: linear-gradient(130deg, var(--lila) 0%, var(--gold-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .intro-names {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(1.7rem, 4vw, 2.8rem);
    color: var(--gold);
    margin-bottom: 36px;
    text-shadow: 0 0 40px rgba(212,168,67,0.35);
  }

  .divider {
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--lila), transparent);
    margin: 20px auto 28px;
  }

  .intro-body {
    font-size: 1.12rem;
    font-weight: 300;
    font-style: italic;
    line-height: 2.1;
    color: var(--text-muted);
    margin-bottom: 52px;
  }

  .btn {
    display: inline-block;
    padding: 16px 52px;
    border: 1px solid var(--lila);
    color: var(--lila-soft);
    font-family: 'Cinzel', serif;
    font-size: 0.76rem;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    cursor: pointer;
    background: transparent;
    position: relative;
    overflow: hidden;
    transition: all 0.4s ease;
  }

  .btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(200,168,233,0.07), rgba(212,168,67,0.07));
    opacity: 0;
    transition: opacity 0.4s;
  }

  .btn:hover::before { opacity: 1; }
  .btn:hover {
    border-color: var(--gold-light);
    color: var(--gold-glow);
    box-shadow: 0 0 28px rgba(212,168,67,0.14);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â• QUIZ â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .quiz-inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 48px;
    width: 100%;
  }

  @media (min-width: 740px) {
    .quiz-inner { flex-direction: row; align-items: flex-start; gap: 60px; }
  }

  /* Heart */
  .heart-col {
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 18px;
  }

  .heart-wrap {
    width: 260px;
    height: 280px;
    position: relative;
  }

  @media (min-width: 740px) {
    .heart-wrap { width: 300px; height: 325px; position: sticky; top: 40px; }
  }

  #heartSvg {
    width: 100%;
    height: 100%;
    transition: filter 1.2s ease;
  }

  #heartSvg.glowing {
    filter:
      drop-shadow(0 0 14px rgba(212,168,67,0.95))
      drop-shadow(0 0 35px rgba(212,168,67,0.65))
      drop-shadow(0 0 70px rgba(212,168,67,0.4))
      drop-shadow(0 0 110px rgba(200,168,233,0.25));
    animation: heartbeat 2s ease-in-out infinite;
  }

  @keyframes heartbeat {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.038); }
  }

  .crack {
    stroke: var(--gold);
    stroke-width: 1.8;
    fill: none;
    stroke-linecap: round;
    stroke-dasharray: 500;
    stroke-dashoffset: 500;
    opacity: 0.12;
    transition: stroke-dashoffset 1.4s cubic-bezier(0.4,0,0.2,1), opacity 0.6s ease, filter 0.9s ease;
  }

  .crack.lit {
    stroke-dashoffset: 0;
    opacity: 1;
    filter: drop-shadow(0 0 3px var(--gold)) drop-shadow(0 0 7px var(--gold-light));
  }

  .fragment {
    fill: rgba(212,168,67,0);
    transition: fill 1.5s ease;
  }

  .fragment.lit { fill: rgba(212,168,67,0.09); }

  .heart-score-label {
    font-family: 'Cinzel', serif;
    font-size: 0.68rem;
    letter-spacing: 0.25em;
    color: var(--gold);
    opacity: 0.65;
  }

  /* Question col */
  .question-col {
    flex: 1;
    width: 100%;
    max-width: 490px;
  }

  .progress-row {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 44px;
  }

  .progress-track {
    flex: 1;
    height: 1px;
    background: rgba(200,168,233,0.14);
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--lila-deep), var(--gold-light));
    transition: width 0.9s cubic-bezier(0.4,0,0.2,1);
    box-shadow: 0 0 8px rgba(200,168,233,0.35);
    width: 0%;
  }

  .progress-num {
    font-family: 'Cinzel', serif;
    font-size: 0.66rem;
    letter-spacing: 0.2em;
    color: var(--lila);
    white-space: nowrap;
  }

  .q-eyebrow {
    font-family: 'Cinzel', serif;
    font-size: 0.63rem;
    letter-spacing: 0.42em;
    color: var(--lila);
    opacity: 0.55;
    margin-bottom: 18px;
  }

  .q-text {
    font-size: clamp(1.22rem, 2.4vw, 1.6rem);
    font-weight: 300;
    font-style: italic;
    line-height: 1.7;
    color: var(--text);
    margin-bottom: 36px;
    min-height: 68px;
  }

  .options-wrap { display: flex; flex-direction: column; gap: 10px; }

  .opt {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 13px 20px;
    border: 1px solid rgba(200,168,233,0.11);
    background: rgba(200,168,233,0.015);
    color: var(--text);
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.04rem;
    cursor: pointer;
    transition: all 0.26s ease;
    text-align: left;
    position: relative;
    overflow: hidden;
  }

  .opt .opt-key {
    font-family: 'Cinzel', serif;
    font-size: 0.68rem;
    color: var(--lila);
    opacity: 0.65;
    flex-shrink: 0;
    width: 16px;
  }

  .opt::after {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 2px;
    background: linear-gradient(180deg, var(--lila), var(--gold));
    transform: scaleY(0);
    transition: transform 0.26s ease;
    transform-origin: bottom;
  }

  .opt:hover { border-color: rgba(200,168,233,0.32); background: rgba(200,168,233,0.05); color: var(--lila-soft); }
  .opt:hover::after { transform: scaleY(1); }

  .opt.correct { border-color: var(--gold); background: rgba(212,168,67,0.1); color: var(--gold-glow); pointer-events: none; }
  .opt.incorrect { border-color: rgba(190,80,80,0.28); background: rgba(190,80,80,0.04); color: rgba(220,150,150,0.5); pointer-events: none; }
  .opt.disabled { pointer-events: none; opacity: 0.42; }

  .feedback-msg {
    margin-top: 22px;
    font-size: 1rem;
    font-style: italic;
    color: var(--lila-soft);
    min-height: 24px;
    opacity: 0;
    transition: opacity 0.5s ease;
    line-height: 1.65;
  }
  .feedback-msg.show { opacity: 1; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â• FINAL â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  #final { max-width: 700px; }

  .final-heart-mini {
    margin-bottom: 44px;
    animation: fadeUp 1s ease forwards;
  }

  .final-heart-mini svg {
    width: 96px;
    height: 104px;
    filter:
      drop-shadow(0 0 16px rgba(212,168,67,0.85))
      drop-shadow(0 0 40px rgba(200,168,233,0.45));
    animation: heartbeat 2s ease-in-out infinite;
  }

  /* Letter */
  .letter {
    position: relative;
    width: 100%;
    background: linear-gradient(150deg, #18102a, #110c1c);
    border: 1px solid rgba(212,168,67,0.18);
    padding: 56px 52px;
    animation: fadeUp 1.2s 0.25s ease both;
  }

  .letter::before {
    content: '';
    position: absolute;
    inset: 5px;
    border: 1px solid rgba(200,168,233,0.06);
    pointer-events: none;
  }

  .lc {
    position: absolute;
    width: 28px; height: 28px;
    border-color: var(--gold);
    border-style: solid;
    opacity: 0.35;
  }
  .lc.tl { top: 13px; left: 13px; border-width: 1px 0 0 1px; }
  .lc.tr { top: 13px; right: 13px; border-width: 1px 1px 0 0; }
  .lc.bl { bottom: 13px; left: 13px; border-width: 0 0 1px 1px; }
  .lc.br { bottom: 13px; right: 13px; border-width: 0 1px 1px 0; }

  .letter-eyebrow {
    font-family: 'Cinzel', serif;
    font-size: 0.62rem;
    letter-spacing: 0.42em;
    color: var(--gold);
    opacity: 0.65;
    text-align: center;
    margin-bottom: 30px;
  }

  .letter-title {
    font-family: 'Dancing Script', cursive;
    font-size: clamp(2rem, 5vw, 3.2rem);
    color: var(--gold-light);
    text-align: center;
    margin-bottom: 8px;
    text-shadow: 0 0 28px rgba(212,168,67,0.3);
  }

  .letter-sub {
    font-family: 'Dancing Script', cursive;
    font-size: 1.08rem;
    color: var(--lila);
    text-align: center;
    margin-bottom: 36px;
    opacity: 0.78;
  }

  .ldiv {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 26px 0;
    font-size: 0.8rem;
    color: rgba(212,168,67,0.3);
  }
  .ldiv::before, .ldiv::after {
    content: '';
    flex: 1;
    height: 1px;
  }
  .ldiv::before { background: linear-gradient(90deg, transparent, rgba(212,168,67,0.22)); }
  .ldiv::after  { background: linear-gradient(90deg, rgba(212,168,67,0.22), transparent); }

  .letter-body {
    font-size: 1.08rem;
    font-weight: 300;
    font-style: italic;
    line-height: 2.15;
    color: var(--text-muted);
  }

  .letter-body strong { color: var(--lila-soft); font-style: normal; font-weight: 400; }
  .letter-body .gold  { color: var(--gold-light); font-style: normal; }

  /* Score */
  .score-block {
    text-align: center;
    padding: 22px 0;
  }

  .score-big {
    font-family: 'Cinzel', serif;
    font-size: 3.2rem;
    color: var(--gold);
    text-shadow: 0 0 22px rgba(212,168,67,0.5);
    line-height: 1;
  }

  .score-lbl {
    font-size: 0.82rem;
    color: var(--text-muted);
    letter-spacing: 0.2em;
    margin-top: 8px;
  }

  /* Answers recap */
  .answers-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin: 8px 0;
  }

  .a-item {
    display: flex;
    align-items: flex-start;
    gap: 14px;
    padding: 11px 15px;
    background: rgba(200,168,233,0.025);
    border-left: 2px solid rgba(212,168,67,0.15);
    transition: border-color 0.3s;
    animation: fadeUp 0.45s ease both;
  }

  .a-item:hover { border-left-color: var(--gold); }

  .a-q {
    font-size: 0.86rem;
    color: var(--text-muted);
    font-style: italic;
    flex: 1;
    line-height: 1.55;
  }

  .a-badge {
    font-family: 'Cinzel', serif;
    font-size: 0.65rem;
    letter-spacing: 0.08em;
    padding: 3px 9px;
    border: 1px solid;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .a-badge.ok  { border-color: var(--gold); color: var(--gold); background: rgba(212,168,67,0.07); }
  .a-badge.err { border-color: rgba(190,80,80,0.3); color: rgba(220,140,140,0.6); }

  /* Closing */
  .letter-closing {
    font-family: 'Dancing Script', cursive;
    font-size: 1.45rem;
    color: var(--gold-light);
    text-align: right;
    margin-top: 30px;
    line-height: 1.9;
  }

  .letter-seal {
    text-align: center;
    margin-top: 34px;
    font-size: 1.5rem;
    opacity: 0.6;
  }

  .btn-restart {
    margin-top: 36px;
    padding: 14px 44px;
    border: 1px solid rgba(200,168,233,0.22);
    color: var(--lila);
    font-family: 'Cinzel', serif;
    font-size: 0.7rem;
    letter-spacing: 0.3em;
    cursor: pointer;
    background: transparent;
    transition: all 0.3s ease;
  }

  .btn-restart:hover {
    border-color: var(--lila);
    background: rgba(200,168,233,0.05);
    box-shadow: 0 0 18px rgba(200,168,233,0.1);
  }

  /* â”€â”€ Sparkles â”€â”€ */
  #sparkleCanvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 10;
    opacity: 0;
    transition: opacity 1.3s ease;
  }
  #sparkleCanvas.active { opacity: 1; }

  /* â”€â”€ Anims â”€â”€ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .q-enter { animation: slideIn 0.52s cubic-bezier(0.4,0,0.2,1) forwards; }

  @media (max-width: 500px) {
    .letter { padding: 36px 22px; }
    .heart-wrap { width: 220px; height: 240px; }
  }
</style>
</head>
<body>

<canvas id="sparkleCanvas"></canvas>

<div id="app">

  <!-- â•â•â•â•â•â• INTRO â•â•â•â•â•â• -->
  <div id="intro" class="screen active">
    <p class="eyebrow">Una historia de amor rota y reconstruida con oro</p>
    <h1 class="intro-title">El corazÃ³n <em>kintsugi</em></h1>
    <p class="intro-names">Ale &amp; Nao</p>
    <div class="divider"></div>
    <p class="intro-body">
      En JapÃ³n, el kintsugi es el arte de reparar lo roto con oro puro.<br>
      Cada grieta no es una cicatriz â€” es donde entra la luz.<br><br>
      Responde estas 10 preguntas y observa cÃ³mo nuestro corazÃ³n<br>
      se ilumina, fragmento por fragmento, hasta brillar completo.
    </p>
    <button class="btn" onclick="startQuiz()">âœ¦ Comenzar âœ¦</button>
  </div>

  <!-- â•â•â•â•â•â• QUIZ â•â•â•â•â•â• -->
  <div id="quiz" class="screen">
    <div class="quiz-inner">

      <div class="heart-col">
        <div class="heart-wrap">
          <svg id="heartSvg" viewBox="0 0 200 215" xmlns="http://www.w3.org/2000/svg">
            <!-- Heart base -->
            <path d="M100,192 C100,192 12,138 12,78 C12,44 36,20 66,20 C81,20 93,28 100,38 C107,28 119,20 134,20 C164,20 188,44 188,78 C188,138 100,192 100,192Z"
              fill="#160f22" stroke="rgba(200,168,233,0.1)" stroke-width="1.2"/>

            <!-- 10 Fragments -->
            <path class="fragment" id="frag0"  d="M100,38 L116,50 L100,60 L84,50Z"/>
            <path class="fragment" id="frag1"  d="M84,50 L62,57 L54,80 L80,74 L100,60Z"/>
            <path class="fragment" id="frag2"  d="M116,50 L138,57 L146,80 L120,74 L100,60Z"/>
            <path class="fragment" id="frag3"  d="M54,80 L32,106 L56,118 L75,98 L80,74Z"/>
            <path class="fragment" id="frag4"  d="M146,80 L168,106 L144,118 L125,98 L120,74Z"/>
            <path class="fragment" id="frag5"  d="M80,74 L100,60 L120,74 L125,98 L100,108 L75,98Z"/>
            <path class="fragment" id="frag6"  d="M56,118 L48,148 L74,160 L89,140 L75,98Z"/>
            <path class="fragment" id="frag7"  d="M144,118 L152,148 L126,160 L111,140 L125,98Z"/>
            <path class="fragment" id="frag8"  d="M75,98 L89,140 L100,192 L111,140 L125,98 L100,108Z"/>
            <path class="fragment" id="frag9"  d="M74,160 L100,192 L126,160 L111,140 L89,140Z"/>

            <!-- Aortic tubes -->
            <g fill="#1a1028" stroke="rgba(200,168,233,0.09)" stroke-width="0.9">
              <rect x="82"  y="6"  width="7" height="16" rx="3.5"/>
              <rect x="92"  y="2"  width="7" height="14" rx="3.5"/>
              <rect x="102" y="4"  width="7" height="15" rx="3.5"/>
              <rect x="112" y="8"  width="6" height="13" rx="3"/>
              <rect x="70"  y="12" width="6" height="12" rx="3"/>
              <rect x="124" y="14" width="5" height="11" rx="2.5"/>
              <rect x="20"  y="65" width="6" height="14" rx="3"/>
              <rect x="174" y="65" width="6" height="14" rx="3"/>
              <rect x="14"  y="96" width="6" height="12" rx="3"/>
              <rect x="180" y="96" width="6" height="12" rx="3"/>
            </g>

            <!-- 10 Crack paths -->
            <path class="crack" id="crack0" d="M84,50 L100,38 L116,50 L100,60 L84,50"/>
            <path class="crack" id="crack1" d="M84,50 L62,57 L54,80 L80,74"/>
            <path class="crack" id="crack2" d="M116,50 L138,57 L146,80 L120,74"/>
            <path class="crack" id="crack3" d="M54,80 L32,106 L56,118 L75,98"/>
            <path class="crack" id="crack4" d="M146,80 L168,106 L144,118 L125,98"/>
            <path class="crack" id="crack5" d="M80,74 L100,108 L120,74 M100,60 L100,108"/>
            <path class="crack" id="crack6" d="M56,118 L48,148 L74,160 L89,140"/>
            <path class="crack" id="crack7" d="M144,118 L152,148 L126,160 L111,140"/>
            <path class="crack" id="crack8" d="M89,140 L100,192 L111,140 L100,108"/>
            <path class="crack" id="crack9" d="M74,160 L100,192 L126,160"/>

            <!-- Heart outline -->
            <path d="M100,192 C100,192 12,138 12,78 C12,44 36,20 66,20 C81,20 93,28 100,38 C107,28 119,20 134,20 C164,20 188,44 188,78 C188,138 100,192 100,192Z"
              fill="none" stroke="rgba(200,168,233,0.18)" stroke-width="1.6"/>
          </svg>
        </div>
        <div class="heart-score-label" id="heartScore">0 / 10 âœ¦</div>
      </div>

      <div class="question-col">
        <div class="progress-row">
          <div class="progress-track"><div class="progress-fill" id="progressFill"></div></div>
          <span class="progress-num" id="progressNum">0 / 10</span>
        </div>
        <div id="qPanel">
          <p class="q-eyebrow" id="qEyebrow">PREGUNTA 1 DE 10</p>
          <p class="q-text" id="qText"></p>
          <div class="options-wrap" id="optionsWrap"></div>
          <p class="feedback-msg" id="feedbackMsg"></p>
        </div>
      </div>

    </div>
  </div>

  <!-- â•â•â•â•â•â• FINAL â•â•â•â•â•â• -->
  <div id="final" class="screen">

    <div class="final-heart-mini">
      <svg viewBox="0 0 200 215" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="fg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%"   stop-color="#C8A8E9" stop-opacity="0.35"/>
            <stop offset="50%"  stop-color="#D4A843" stop-opacity="0.55"/>
            <stop offset="100%" stop-color="#FFE484" stop-opacity="0.35"/>
          </linearGradient>
        </defs>
        <path d="M100,192 C100,192 12,138 12,78 C12,44 36,20 66,20 C81,20 93,28 100,38 C107,28 119,20 134,20 C164,20 188,44 188,78 C188,138 100,192 100,192Z"
          fill="url(#fg)" stroke="#D4A843" stroke-width="1.5"/>
        <path d="M84,50 L100,38 L116,50 L100,60 L84,50 M80,74 L100,108 L120,74 M89,140 L100,192 L111,140"
          stroke="#FFE484" stroke-width="1.3" fill="none" opacity="0.85"
          style="filter:drop-shadow(0 0 4px #FFE484)"/>
      </svg>
    </div>

    <div class="letter">
      <div class="lc tl"></div><div class="lc tr"></div>
      <div class="lc bl"></div><div class="lc br"></div>

      <p class="letter-eyebrow">âœ¦ &nbsp; Para Naomy, con todo mi corazÃ³n &nbsp; âœ¦</p>
      <h2 class="letter-title">Mi corazÃ³n kintsugi</h2>
      <p class="letter-sub">â€” Una carta de Ale, para ti â€”</p>

      <div class="ldiv">â§</div>

      <p class="letter-body">
        <strong>Nao</strong>, eres mi color <strong style="color:var(--lila)">lila</strong> favorito â€”
        ese que lo cubre todo con suavidad y lo convierte en algo mÃ¡s hermoso.<br><br>

        Como el aroma de <strong>coco</strong> que Ãºltimamente te envuelve, siempre encuentro en ti
        algo que me calma, algo que me hace sentir completamente en casa.
        Eres mi <strong>princesa Tiana</strong> â€” alguien que trabaja duro,
        que sueÃ±a sin lÃ­mites, que merece todo lo bueno de este mundo.<br><br>

        Desde aquel <strong class="gold">7 de octubre</strong> en que hicimos oficial lo que ya
        sentÃ­amos, cada dÃ­a he aprendido a amarte mejor y mÃ¡s profundo.
        Como el kintsugi que ves en este corazÃ³n,
        nuestras grietas no nos rompieron â€” <em>nos hicieron mÃ¡s brillantes juntos.</em><br><br>

        Eres mi pilar. Mi mundo. Mi persona favorita en este universo entero.
        HarÃ­a absolutamente todo por verte feliz, y no son solo palabras â€”
        cada dÃ­a lo demuestra.
      </p>

      <div class="ldiv">âœ¦</div>

      <div class="score-block">
        <div class="score-big" id="finalScore">â€”</div>
        <div class="score-lbl">respuestas correctas de 10</div>
      </div>

      <div class="ldiv">â§</div>

      <p style="font-family:'Cinzel',serif;font-size:0.62rem;letter-spacing:0.38em;color:var(--text-muted);margin-bottom:18px;text-align:center;">TUS RESPUESTAS</p>

      <div class="answers-grid" id="answersGrid"></div>

      <div class="ldiv">âœ¦</div>

      <div class="letter-closing">
        Con todo mi amor,<br>
        <span style="font-size:2.1rem;color:var(--gold);">Ale âœ¦</span>
      </div>

      <div class="letter-seal">âœ¦ &nbsp; <span style="color:var(--lila);font-size:1.3rem;">â™¡</span> &nbsp; âœ¦</div>
    </div>

    <button class="btn-restart" onclick="restartQuiz()">âœ¦ Volver al inicio âœ¦</button>
  </div>

</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PREGUNTAS PERSONALIZADAS â€” Ale & Naomy
   Cambia el texto, opciones o correct cuando quieras.
   Para tipo 'multiple': correct = Ã­ndice (0-based) de la respuesta correcta
   Para tipo 'tf': correct = true (Verdadero) o false (Falso)
   isGastro = true: opciones especiales para la pregunta del gemelo ğŸ˜‚
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const questions = [
  {
    type: 'multiple',
    text: 'Â¿CuÃ¡l es el color favorito de Nao, sobre todos los demÃ¡s?',
    options: ['Azul celeste', 'Lila / Lavanda', 'Verde esmeralda', 'Rosa pastel'],
    correct: 1,
    feedback: 'ğŸ’œ Â¡El lila! Como ella â€” suave, especial e imposible de olvidar.'
  },
  {
    type: 'multiple',
    text: 'Â¿Con quÃ© aroma estÃ¡ completamente obsesionada Nao Ãºltimamente?',
    options: ['Vainilla', 'JazmÃ­n', 'Coco', 'Lavanda'],
    correct: 2,
    feedback: 'ğŸ¥¥ Â¡El coco! Un aroma que la envuelve y que ya es parte de ella.'
  },
  {
    type: 'multiple',
    text: 'Â¿CuÃ¡l es la princesa Disney favorita de Naomy?',
    options: ['Ariel', 'Moana', 'Cenicienta', 'Tiana'],
    correct: 3,
    feedback: 'ğŸ‘¸ğŸ½ Â¡Tiana! Como ella: soÃ±adora, trabajadora y absolutamente mÃ¡gica.'
  },
  {
    type: 'multiple',
    text: 'Â¿En quÃ© fecha especial celebran su aniversario Ale y Nao?',
    options: ['14 de agosto', '21 de septiembre', '7 de octubre', '1 de febrero'],
    correct: 2,
    feedback: 'ğŸ“… Â¡El 7 de octubre! La fecha que quedÃ³ grabada en oro para siempre.'
  },
  {
    type: 'multiple',
    text: 'Â¿CuÃ¡l es la comida favorita de Naomy?',
    options: ['Lomo saltado', 'Mondonguito a la italiana', 'Ceviche', 'Arroz con pollo'],
    correct: 1,
    feedback: 'ğŸ² Â¡El mondonguito a la italiana! El sabor que la hace mÃ¡s feliz.'
  },
  {
    type: 'gastro',
    text: 'Â¿Con quÃ© nombre anatÃ³mico se les conoce a los "gemelos"? (esas masas musculares de las pantorrillas) ğŸ¦µ',
    options: ['Gastronemios', 'CuÃ¡driceps', 'Isquiotibiales', 'SÃ³leo'],
    correct: 0,
    feedback: 'ğŸ˜‚ Â¡GASTRONEMIOS! Â¿O preferÃ­as decirles simplemente "gemelos"? ğŸ¦µâœ¨'
  },
  {
    type: 'multiple',
    text: 'Â¿CuÃ¡l fue nuestra primera canciÃ³n dedicada juntos, esa que siempre cantÃ¡bamos con tanto amor?',
    options: ['Flaca â€” Nanpa BÃ¡sico', 'Princesa â€” RÃ­o Roma', 'TÃº me cambiaste â€” Chino & Nacho', 'Besos en guerra â€” Morat'],
    correct: 0,
    feedback: 'ğŸµ Â¡Flaca de Nanpa BÃ¡sico! Una canciÃ³n que ya vive para siempre en su historia.'
  },
  {
    type: 'multiple',
    text: 'Â¿CuÃ¡l fue la primera fecha especial de Alessandro desde el comienzo?',
    options: ['14/02/2016', '14/04/2016', '10/10/2016', '21/09/2015'],
    correct: 1,
    feedback: 'ğŸ—“ï¸ Â¡El 14 de abril de 2016! Una fecha grabada en el corazÃ³n desde el principio.'
  },
  {
    type: 'tf',
    text: 'Â¿Ale considera a Naomy su persona favorita en el mundo entero?',
    correct: true,
    feedback: 'ğŸ’› Absolutamente sÃ­. Sin dudarlo ni medio segundo.'
  },
  {
    type: 'multiple',
    text: 'Â¿QuÃ© representa el kintsugi en la historia de Ale y Nao?',
    options: [
      'Que lo roto debe ocultarse',
      'Que son perfectos sin haber pasado por nada difÃ­cil',
      'Que sus grietas los hicieron mÃ¡s brillantes y hermosos',
      'Que el amor no necesita reparaciÃ³n'
    ],
    correct: 2,
    feedback: 'ğŸŒŸ Exacto. Lo que alguna vez se quebrÃ³, ahora brilla con oro. Eso son ellos.'
  }
];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ESTADO
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let current = 0, score = 0, answered = false;
let userAnswers = [];

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   AUDIO â€” Web Audio API
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let audioCtx = null;

function initAudio() {
  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
}

function playTones(freqs, vol, dur, gap) {
  try {
    initAudio();
    freqs.forEach((f, i) => {
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.connect(g); g.connect(audioCtx.destination);
      o.type = 'sine'; o.frequency.value = f;
      const t = audioCtx.currentTime + i * gap;
      g.gain.setValueAtTime(0, t);
      g.gain.linearRampToValueAtTime(vol, t + 0.05);
      g.gain.exponentialRampToValueAtTime(0.001, t + dur);
      o.start(t); o.stop(t + dur);
    });
  } catch(e) {}
}

const playCorrect = () => playTones([523, 659, 784, 1047], 0.07, 0.75, 0.12);
const playWrong   = () => playTones([220, 185], 0.05, 0.55, 0.18);
const playFinale  = () => playTones([523, 659, 784, 880, 1047, 1319], 0.08, 1.3, 0.19);

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPARKLE CANVAS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const cvs = document.getElementById('sparkleCanvas');
const c2d = cvs.getContext('2d');
let parts = [], animId = null;

function resizeCvs() { cvs.width = window.innerWidth; cvs.height = window.innerHeight; }
window.addEventListener('resize', resizeCvs);
resizeCvs();

function spawnParts() {
  for (let i = 0; i < 160; i++) {
    const useGold = Math.random() > 0.38;
    parts.push({
      x: Math.random() * cvs.width,
      y: Math.random() * cvs.height,
      vx: (Math.random() - 0.5) * 1.3,
      vy: (Math.random() - 0.5) * 1.3,
      sz: Math.random() * 2.8 + 0.7,
      alpha: Math.random() * 0.7 + 0.3,
      tw: Math.random() * Math.PI * 2,
      col: useGold
        ? (Math.random() > 0.5 ? '#FFE484' : '#D4A843')
        : '#C8A8E9'
    });
  }
}

function drawStar4(cx, cy, r) {
  c2d.beginPath();
  for (let i = 0; i < 4; i++) {
    c2d.lineTo(cx, cy - r * 2.2);
    c2d.rotate(Math.PI / 4);
    c2d.lineTo(cx, cy - r * 0.45);
    c2d.rotate(Math.PI / 4);
  }
  c2d.closePath();
}

function animateParts() {
  c2d.clearRect(0, 0, cvs.width, cvs.height);
  parts.forEach(p => {
    p.x += p.vx; p.y += p.vy; p.tw += 0.065;
    if (p.x < -8) p.x = cvs.width + 8;
    if (p.x > cvs.width + 8) p.x = -8;
    if (p.y < -8) p.y = cvs.height + 8;
    if (p.y > cvs.height + 8) p.y = -8;

    const a = p.alpha * (0.5 + 0.5 * Math.sin(p.tw));
    c2d.save();
    c2d.globalAlpha = Math.max(0, a);
    c2d.fillStyle = p.col;
    c2d.shadowBlur = 10;
    c2d.shadowColor = p.col;
    c2d.translate(p.x, p.y);
    c2d.rotate(p.tw * 0.38);
    drawStar4(0, 0, p.sz);
    c2d.fill();
    c2d.restore();
  });
  animId = requestAnimationFrame(animateParts);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEART ILLUMINATION
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function lightFrag(i) {
  const f = document.getElementById('frag' + i);
  const c = document.getElementById('crack' + i);
  if (f) f.classList.add('lit');
  if (c) c.classList.add('lit');
}

function illuminateAll() {
  for (let i = 0; i < 10; i++) lightFrag(i);
  setTimeout(() => document.getElementById('heartSvg').classList.add('glowing'), 900);
}

function resetHeart() {
  document.getElementById('heartSvg').classList.remove('glowing');
  for (let i = 0; i < 10; i++) {
    const f = document.getElementById('frag' + i);
    const c = document.getElementById('crack' + i);
    if (f) f.classList.remove('lit');
    if (c) c.classList.remove('lit');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREENS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   QUIZ LOGIC
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startQuiz() {
  showScreen('quiz');
  renderQuestion();
}

function renderQuestion() {
  const q = questions[current];
  answered = false;

  // Update progress
  document.getElementById('progressFill').style.width = (current / 10 * 100) + '%';
  document.getElementById('progressNum').textContent = current + ' / 10';
  document.getElementById('qEyebrow').textContent = `PREGUNTA ${current + 1} DE 10`;
  document.getElementById('heartScore').textContent = score + ' / ' + current + ' âœ¦';

  // Animate
  const panel = document.getElementById('qPanel');
  panel.classList.remove('q-enter');
  void panel.offsetWidth;
  panel.classList.add('q-enter');

  document.getElementById('qText').textContent = q.text;

  const wrap = document.getElementById('optionsWrap');
  wrap.innerHTML = '';
  document.getElementById('feedbackMsg').textContent = '';
  document.getElementById('feedbackMsg').classList.remove('show');

  // Build options
  let opts;
  if (q.type === 'tf') {
    opts = [{ label: 'Verdadero', isCorrect: q.correct === true },
            { label: 'Falso',     isCorrect: q.correct === false }];
  } else {
    opts = q.options.map((label, i) => ({ label, isCorrect: i === q.correct }));
  }

  const keys = q.type === 'tf' ? ['V','F'] : ['A','B','C','D'];

  opts.forEach(({ label, isCorrect }, i) => {
    const btn = document.createElement('button');
    btn.className = 'opt';
    btn.innerHTML = `<span class="opt-key">${keys[i]}</span>${label}`;
    btn.onclick = () => handleAnswer(isCorrect, btn);
    wrap.appendChild(btn);
  });
}

function handleAnswer(isCorrect, btn) {
  if (answered) return;
  answered = true;
  initAudio();

  const allBtns = document.querySelectorAll('.opt');
  const q = questions[current];

  // Find correct button index
  let correctIdx;
  if (q.type === 'tf') {
    correctIdx = q.correct ? 0 : 1;
  } else {
    correctIdx = q.correct;
  }

  userAnswers.push({
    question: q.text,
    isCorrect
  });

  if (isCorrect) {
    score++;
    btn.classList.add('correct');
    playCorrect();
    lightFrag(current);
  } else {
    btn.classList.add('incorrect');
    playWrong();
    allBtns[correctIdx].classList.add('correct');
  }

  allBtns.forEach(b => {
    if (!b.classList.contains('correct') && !b.classList.contains('incorrect'))
      b.classList.add('disabled');
  });

  const fb = document.getElementById('feedbackMsg');
  fb.textContent = q.feedback;
  fb.classList.add('show');

  setTimeout(() => {
    current++;
    if (current < questions.length) renderQuestion();
    else showFinal();
  }, 2500);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FINAL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showFinal() {
  document.getElementById('progressFill').style.width = '100%';
  document.getElementById('progressNum').textContent = '10 / 10';
  document.getElementById('heartScore').textContent = score + ' / 10 âœ¦';
  illuminateAll();

  setTimeout(() => {
    showScreen('final');
    playFinale();

    document.getElementById('finalScore').textContent = score + ' / 10';

    const grid = document.getElementById('answersGrid');
    grid.innerHTML = '';
    userAnswers.forEach((a, i) => {
      const el = document.createElement('div');
      el.className = 'a-item';
      el.style.animationDelay = (i * 0.06) + 's';
      // Trim key prefix from question display
      const qShort = a.question.length > 72
        ? a.question.slice(0, 70) + 'â€¦'
        : a.question;
      el.innerHTML = `
        <span class="a-q">${i + 1}. ${qShort}</span>
        <span class="a-badge ${a.isCorrect ? 'ok' : 'err'}">${a.isCorrect ? 'âœ¦ Correcto' : 'âœ— Incorrecto'}</span>
      `;
      grid.appendChild(el);
    });

    spawnParts();
    cvs.classList.add('active');
    animateParts();
  }, 1900);
}

function restartQuiz() {
  current = 0; score = 0; answered = false; userAnswers = [];
  resetHeart();
  cvs.classList.remove('active');
  cancelAnimationFrame(animId);
  parts = [];
  c2d.clearRect(0, 0, cvs.width, cvs.height);
  showScreen('intro');
}
</script>
</body>
</html>
